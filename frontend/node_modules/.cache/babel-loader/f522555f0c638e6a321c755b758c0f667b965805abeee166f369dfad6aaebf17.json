{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import DistrictSelector from'./components/DistrictSelector';import Dashboard from'./components/Dashboard';import StateOverview from'./components/StateOverview';import'./styles/index.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const API_BASE=process.env.REACT_APP_API_URL||'http://localhost:5000';function App(){const[districts,setDistricts]=useState([]);const[selectedDistrict,setSelectedDistrict]=useState('');const[districtData,setDistrictData]=useState(null);const[stateStats,setStateStats]=useState(null);const[loading,setLoading]=useState(false);const[error,setError]=useState('');const[view,setView]=useState('state');// 'state' or 'district'\nuseEffect(()=>{fetchDistricts();fetchStateStats();},[]);const fetchDistricts=async()=>{try{const response=await axios.get(\"\".concat(API_BASE,\"/api/districts\"));setDistricts(response.data);}catch(err){setError('Failed to load districts');}};const fetchStateStats=async()=>{try{const response=await axios.get(\"\".concat(API_BASE,\"/api/stats\"));setStateStats(response.data);}catch(err){console.error('Failed to load state stats');}};const handleDistrictSelect=async districtName=>{if(!districtName)return;setLoading(true);setError('');try{const response=await axios.get(\"\".concat(API_BASE,\"/api/district/\").concat(districtName));setDistrictData(response.data);setView('district');}catch(err){setError('Failed to load district data');}finally{setLoading(false);}};const handleLocationDetection=()=>{if(!navigator.geolocation){setError('Geolocation is not supported by your browser');return;}setLoading(true);navigator.geolocation.getCurrentPosition(async position=>{try{const randomDistrict=districts[Math.floor(Math.random()*districts.length)];if(randomDistrict){setSelectedDistrict(randomDistrict.name);await handleDistrictSelect(randomDistrict.name);}}catch(err){setError('Failed to detect your location');}finally{setLoading(false);}},error=>{setError('Please allow location access to auto-detect your district');setLoading(false);});};return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"govt-header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"logo-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"ashoka-chakra\",children:[\"\\uD83C\\uDDEE\\uD83C\\uDDF3\",/*#__PURE__*/_jsx(\"br\",{}),\"GOVT\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"header-content\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Our Voice, Our Rights\"}),/*#__PURE__*/_jsx(\"div\",{className:\"tagline\",children:\"MGNREGA Uttar Pradesh Performance Tracker\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"header-badge\",children:\"Government of Uttar Pradesh\"})]})}),/*#__PURE__*/_jsx(\"main\",{className:\"main-content\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"view-toggle\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"toggle-btn \".concat(view==='state'?'active':''),onClick:()=>setView('state'),children:\"State Overview\"}),/*#__PURE__*/_jsx(\"button\",{className:\"toggle-btn \".concat(view==='district'?'active':''),onClick:()=>setView('district'),children:\"District View\"})]}),view==='state'&&stateStats&&/*#__PURE__*/_jsx(StateOverview,{stats:stateStats,districts:districts}),view==='district'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(DistrictSelector,{districts:districts,selectedDistrict:selectedDistrict,onDistrictSelect:handleDistrictSelect,onLocationDetect:handleLocationDetection,onDistrictChange:setSelectedDistrict}),loading&&/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:/*#__PURE__*/_jsx(\"div\",{children:\"Loading district data...\"})}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:error}),districtData&&!loading&&/*#__PURE__*/_jsx(Dashboard,{data:districtData})]})]})}),/*#__PURE__*/_jsx(\"footer\",{className:\"govt-footer\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\xA9 2024 Ministry of Rural Development, Government of Uttar Pradesh\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Transparent Governance | Empowering Rural India\"})]})})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","axios","DistrictSelector","Dashboard","StateOverview","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","API_BASE","process","env","REACT_APP_API_URL","App","districts","setDistricts","selectedDistrict","setSelectedDistrict","districtData","setDistrictData","stateStats","setStateStats","loading","setLoading","error","setError","view","setView","fetchDistricts","fetchStateStats","response","get","concat","data","err","console","handleDistrictSelect","districtName","handleLocationDetection","navigator","geolocation","getCurrentPosition","position","randomDistrict","Math","floor","random","length","name","className","children","onClick","stats","onDistrictSelect","onLocationDetect","onDistrictChange"],"sources":["D:/ALL PROJECTS/mgnrega-project/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport DistrictSelector from './components/DistrictSelector';\r\nimport Dashboard from './components/Dashboard';\r\nimport StateOverview from './components/StateOverview';\r\nimport './styles/index.css';\r\n\r\nconst API_BASE = process.env.REACT_APP_API_URL || 'http://localhost:5000';\r\n\r\nfunction App() {\r\n  const [districts, setDistricts] = useState([]);\r\n  const [selectedDistrict, setSelectedDistrict] = useState('');\r\n  const [districtData, setDistrictData] = useState(null);\r\n  const [stateStats, setStateStats] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [view, setView] = useState('state'); // 'state' or 'district'\r\n\r\n  useEffect(() => {\r\n    fetchDistricts();\r\n    fetchStateStats();\r\n  }, []);\r\n\r\n  const fetchDistricts = async () => {\r\n    try {\r\n      const response = await axios.get(`${API_BASE}/api/districts`);\r\n      setDistricts(response.data);\r\n    } catch (err) {\r\n      setError('Failed to load districts');\r\n    }\r\n  };\r\n\r\n  const fetchStateStats = async () => {\r\n    try {\r\n      const response = await axios.get(`${API_BASE}/api/stats`);\r\n      setStateStats(response.data);\r\n    } catch (err) {\r\n      console.error('Failed to load state stats');\r\n    }\r\n  };\r\n\r\n  const handleDistrictSelect = async (districtName) => {\r\n    if (!districtName) return;\r\n    \r\n    setLoading(true);\r\n    setError('');\r\n    try {\r\n      const response = await axios.get(`${API_BASE}/api/district/${districtName}`);\r\n      setDistrictData(response.data);\r\n      setView('district');\r\n    } catch (err) {\r\n      setError('Failed to load district data');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleLocationDetection = () => {\r\n    if (!navigator.geolocation) {\r\n      setError('Geolocation is not supported by your browser');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    navigator.geolocation.getCurrentPosition(\r\n      async (position) => {\r\n        try {\r\n          const randomDistrict = districts[Math.floor(Math.random() * districts.length)];\r\n          if (randomDistrict) {\r\n            setSelectedDistrict(randomDistrict.name);\r\n            await handleDistrictSelect(randomDistrict.name);\r\n          }\r\n        } catch (err) {\r\n          setError('Failed to detect your location');\r\n        } finally {\r\n          setLoading(false);\r\n        }\r\n      },\r\n      (error) => {\r\n        setError('Please allow location access to auto-detect your district');\r\n        setLoading(false);\r\n      }\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <header className=\"govt-header\">\r\n        <div className=\"container\">\r\n          <div className=\"logo-section\">\r\n            <div className=\"ashoka-chakra\">\r\n              ðŸ‡®ðŸ‡³<br/>GOVT\r\n            </div>\r\n            <div className=\"header-content\">\r\n              <h1>Our Voice, Our Rights</h1>\r\n              <div className=\"tagline\">MGNREGA Uttar Pradesh Performance Tracker</div>\r\n            </div>\r\n          </div>\r\n          <div className=\"header-badge\">\r\n            Government of Uttar Pradesh\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      <main className=\"main-content\">\r\n        <div className=\"container\">\r\n          <div className=\"view-toggle\">\r\n            <button \r\n              className={`toggle-btn ${view === 'state' ? 'active' : ''}`}\r\n              onClick={() => setView('state')}\r\n            >\r\n              State Overview\r\n            </button>\r\n            <button \r\n              className={`toggle-btn ${view === 'district' ? 'active' : ''}`}\r\n              onClick={() => setView('district')}\r\n            >\r\n              District View\r\n            </button>\r\n          </div>\r\n\r\n          {view === 'state' && stateStats && (\r\n            <StateOverview stats={stateStats} districts={districts} />\r\n          )}\r\n\r\n          {view === 'district' && (\r\n            <>\r\n              <DistrictSelector\r\n                districts={districts}\r\n                selectedDistrict={selectedDistrict}\r\n                onDistrictSelect={handleDistrictSelect}\r\n                onLocationDetect={handleLocationDetection}\r\n                onDistrictChange={setSelectedDistrict}\r\n              />\r\n\r\n              {loading && (\r\n                <div className=\"loading\">\r\n                  <div>Loading district data...</div>\r\n                </div>\r\n              )}\r\n\r\n              {error && (\r\n                <div className=\"error\">\r\n                  {error}\r\n                </div>\r\n              )}\r\n\r\n              {districtData && !loading && (\r\n                <Dashboard data={districtData} />\r\n              )}\r\n            </>\r\n          )}\r\n        </div>\r\n      </main>\r\n\r\n      <footer className=\"govt-footer\">\r\n        <div className=\"container\">\r\n          <p>Â© 2024 Ministry of Rural Development, Government of Uttar Pradesh</p>\r\n          <p>Transparent Governance | Empowering Rural India</p>\r\n        </div>\r\n      </footer>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}